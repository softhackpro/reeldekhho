const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Post-DYwXcsvx.js","assets/index-4-6_qnaC.js","assets/index-CAM4xbvV.css","assets/iconBase-CinpP4O6.js","assets/CommentSection-B6B3YB4t.js","assets/useIntersectionObserver-Dwi2r5Zb.js"])))=>i.map(i=>d[i]);
import{j as e,U as u,r as n,u as m,a as f,b as g,s as h,_ as j}from"./index-4-6_qnaC.js";import{u as v}from"./useIntersectionObserver-Dwi2r5Zb.js";import{H as y}from"./HeaderStatic-DK4bX0G1.js";import"./index-Cl20Z7tH.js";import"./iconBase-CinpP4O6.js";function N(){return e.jsx("div",{className:"p-4 sticky top-4",children:e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(u,{className:"w-8 h-8 dark:text-white"}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold dark:text-white",children:"Welcome to Reeldekho"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Discover people to follow"})]})]})})})}const b=()=>{const[d,i]=n.useState(!0),[x,o]=n.useState(null),a=m(s=>{var t;return(t=s==null?void 0:s.post)==null?void 0:t.posts}),r=f(),p=m(s=>{var t;return(t=s==null?void 0:s.post)==null?void 0:t.page});return n.useEffect(()=>{const s=async()=>{var t,l;i(!0);try{const c=await g.get("/post/get?page="+p);r(h({type:"SET_POST",payload:c.data.posts})),console.log(c),console.log(p),console.log(c.data.posts)}catch(c){o(((l=(t=c.response)==null?void 0:t.data)==null?void 0:l.message)||"An error occurred")}finally{i(!1)}};a!=null&&a.length?i(!1):s()},[a==null?void 0:a.length,r]),{loading:d,error:x,posts:a,loadMorePosts:async()=>{var s,t;try{const l=await g.get(`/post/get?page=${p}`);l.data.posts.length>0&&r(h({type:"ADD_POST",payload:l.data.posts}))}catch(l){o(((t=(s=l.response)==null?void 0:s.data)==null?void 0:t.message)||"An error occurred")}}}},w=n.lazy(()=>j(()=>import("./Post-DYwXcsvx.js"),__vite__mapDeps([0,1,2,3,4,5])));function L(){const{loading:d,error:i,loadMorePosts:x}=b(),o=m(r=>r.post.posts),a=v(x,()=>{},{threshold:.3});return d?e.jsx("div",{className:"w-full h-full flex justify-center items-center text-black",children:"Loading posts..."}):e.jsxs(e.Fragment,{children:[e.jsx(y,{}),e.jsxs("div",{className:"max-w-5xl mx-auto grid grid-cols-1 lg:grid-cols-3 margintopo",children:[e.jsxs("div",{className:" lg:col-span-2 mx-auto md:mt-0 max-w-2xl",children:[e.jsx(n.Suspense,{fallback:e.jsx("div",{className:"w-full h-full flex justify-center items-center text-black",children:"Loading post..."}),children:e.jsx("div",{className:"space-y-8",children:(o==null?void 0:o.length)>0?o.map(r=>e.jsx(w,{post:r},r._id)):e.jsx("div",{className:"text-center text-gray-500",children:"No posts available"})})}),e.jsx("div",{ref:a,className:"w-full text-center dark:text-white text-black h-10 bg-transparent",children:"Loading ..."})]}),e.jsx("div",{className:"hidden lg:block",children:e.jsx(N,{})})]})]})}export{L as default};
