import{r as l,b as m,c as x,j as t,R as g}from"./index-BnbwrKyu.js";let R=1;const v=()=>{const[o,d]=l.useState([]),[n,c]=l.useState([]),[i,u]=l.useState(!0),f=async()=>{var a,r;try{const s=(await m.get("/post/get")).data.posts;d(s),c(s.map(p=>p._id)),console.log(s)}catch(e){console.error((r=(a=e==null?void 0:e.response)==null?void 0:a.data)==null?void 0:r.error)}},h=async()=>{var a,r;if(i)try{const s=(await m.get(`/post/get?page=${R}&excludeIds=${n.join(",")}`)).data.posts;s.length<=0&&u(!1),d([...o,...s]),c([...n,...s.map(p=>p._id)]),s.length>0&&R++,console.log(s)}catch(e){console.error((r=(a=e==null?void 0:e.response)==null?void 0:a.data)==null?void 0:r.error)}};return l.useEffect(()=>{f()},[]),{reels:o,loadReels:h}};function j(){const[o,d]=l.useState(!0),{loadReels:n,reels:c}=v(),i=l.useRef(null),u=l.useRef([]),f=x(()=>n(),()=>{},{threshold:1});return t.jsx("div",{className:"h-[100dvh] w-full max-w-md m-auto bg-black overflow-hidden",children:t.jsxs("div",{ref:i,className:"h-full scrollbar-hide overflow-y-scroll snap-start snap-mandatory snap-y",children:[c.map((h,a)=>t.jsx("div",{ref:r=>u.current[a]=r,className:"snap-start w-full h-full",children:t.jsx(g,{reel:h})},a)),t.jsx("div",{ref:f,className:"relative flex justify-center items-center dark:text-white text-black z-10 h-8 w-full snap-start bg-black overflow-hidden",children:o?t.jsx("p",{children:"Loading more reels..."}):t.jsx("p",{children:"No more reels!"})})]})})}function b(){return t.jsx("div",{className:"h-[100dvh] w-full relative m-auto ",children:t.jsx(j,{})})}export{b as default};
