import{r as m,u as x,a as h,b as f,f as u,j as e,e as j,g as b,d as p}from"./index-4-6_qnaC.js";import{F as y}from"./index-Cl20Z7tH.js";import{a as v}from"./index-A81nn3nl.js";import{M as N,F as w,G as k}from"./map-pin-IEnKxz3a.js";import{B as P}from"./bookmark-CZ_SJnD4.js";import"./iconBase-CinpP4O6.js";const S=()=>{const[l,r]=m.useState(!1),[a,d]=m.useState(null),i=x(c=>{var s;return(s=c==null?void 0:c.auth)==null?void 0:s.user}),n=h();return m.useEffect(()=>{i||(async()=>{var s,o;r(!0);try{const t=await f.get("/auth/profile");n(u(t.data.user))}catch(t){d(((o=(s=t==null?void 0:t.response)==null?void 0:s.data)==null?void 0:o.message)||"Something went wronge"),console.error("Error fetching profile:",t)}finally{r(!1)}})()},[]),{loading:l,error:a}},E=()=>e.jsxs("div",{className:"relative animate-pulse",children:[e.jsx("div",{className:"h-[200px] md:h-[300px] bg-gray-300 dark:bg-gray-700"}),e.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row relative",children:[e.jsx("div",{className:"flex-shrink-0 absolute -top-20 md:-top-24 left-4",children:e.jsxs("div",{className:"relative inline-block",children:[e.jsx("div",{className:"w-32 md:w-40 h-32 md:h-40 rounded-full bg-gray-300 dark:bg-gray-700 border-4 border-white dark:border-gray-900"}),e.jsx("div",{className:"absolute bottom-2 right-2 p-2 rounded-full bg-gray-200 dark:bg-gray-800"})]})}),e.jsxs("div",{className:"flex-grow mt-16 md:mt-4 md:ml-48 space-y-2",children:[e.jsx("div",{className:"w-40 h-6 bg-gray-300 dark:bg-gray-700 rounded"}),e.jsx("div",{className:"w-60 h-4 bg-gray-300 dark:bg-gray-700 rounded"})]}),e.jsx("div",{className:"mt-4 md:mt-4 flex space-x-2",children:e.jsx("div",{className:"px-6 py-2 bg-gray-300 dark:bg-gray-700 rounded-md"})})]}),e.jsxs("div",{className:"flex space-x-8 mt-6 pb-4 border-b dark:border-gray-700",children:[e.jsx("div",{className:"w-24 h-4 bg-gray-300 dark:bg-gray-700 rounded"}),e.jsx("div",{className:"w-24 h-4 bg-gray-300 dark:bg-gray-700 rounded"})]})]}),e.jsxs("div",{className:"mt-6 px-4",children:[e.jsx("div",{className:"w-48 h-6 bg-gray-300 dark:bg-gray-700 rounded mb-4"}),e.jsx("div",{className:"w-full h-24 bg-gray-300 dark:bg-gray-700 rounded"})]})]});function F(l){const r=l.value,{loading:a,error:d}=S(),i=j(),[n,c]=m.useState(!0),s=x(t=>{var g;return(g=t==null?void 0:t.auth)==null?void 0:g.user});if(console.log(s),a)return e.jsx(E,{});if(d)return e.jsx(e.Fragment,{children:e.jsx("div",{className:" w-full text-center text-red-500",children:"Sometching went wronge"})});const o=async t=>{i(t)};return e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsx("div",{className:"max-w-screen-lg mx-auto mt-2 sm:mt-5 md:mt-10 px-4",children:e.jsxs("div",{className:"flex flex-row items-center md:items-start gap-6",children:[e.jsxs("div",{className:"flex-shrink-0",children:[e.jsx("div",{className:"w-24 h-24 sm:w-32 sm:h-32 md:w-40 md:h-40 rounded-[25%] overflow-hidden",children:e.jsx("img",{src:s==null?void 0:s.profilePicture,alt:"Profile",className:"w-full h-full object-cover"})}),e.jsx("div",{className:"sm:hidden flex items-center justify-start gap-4 ",children:e.jsx("h1",{className:"text font-semibold text-gray-800 dark:text-gray-200",children:s==null?void 0:s.fullName})})]}),e.jsxs("div",{className:"flex-grow",children:[e.jsxs("div",{className:"sm:flex hidden items-center justify-start gap-4 ",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-semibold text-gray-800 dark:text-gray-200",children:s==null?void 0:s.fullName}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(v,{onClick:()=>o("/messages"),className:"w-6 h-6 text-gray-500 cursor-pointer"}),e.jsx(y,{className:"w-6 h-6 text-green-500 cursor-pointer"}),e.jsx(N,{className:"w-6 h-6 text-blue-500 cursor-pointer"})]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("div",{className:"flex space-x-2 sm:space-x-4 md:space-x-8 mt-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"block font-semibold text-gray-800 dark:text-gray-200 text-center",children:r}),e.jsx("span",{className:"text-xs sm:text-sm text-gray-500 font-medium",children:"posts"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block font-semibold text-gray-800 dark:text-gray-200 text-center",children:"0"}),e.jsx("span",{className:"text-xs sm:text-sm text-gray-500 font-medium",children:"followers"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block font-semibold text-gray-800 dark:text-gray-200 text-center",children:"0"}),e.jsx("span",{className:"text-xs sm:text-sm text-gray-500 font-medium",children:"following"})]})]})}),e.jsxs("div",{className:"sm:mt-4 mt-1 bg-gray-300 p-2 rounded-md",children:[e.jsx("h2",{className:"sm:text-lg text-xs capitalize font-semibold text-gray-800 dark:text-gray-200",children:s==null?void 0:s.occupation}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 sm:text-base text-xs",children:[e.jsx("span",{children:"Website @ "}),e.jsx("a",{href:"#",className:"text-blue-500 hover:underline",children:s==null?void 0:s.website})," ","| ",s==null?void 0:s.adderess]})]})]})]})}),e.jsxs("div",{className:"sm:mt-4 mt-2 flex gap-4 flex-grow",children:[e.jsx("button",{onClick:()=>i("/editProfile"),className:" flex-1 px-4 py-1 border rounded-md text-base sm:text-lg font-semibold hover:bg-gray-100 dark:hover:bg-gray-800",children:"Edit Profile"}),e.jsx("button",{className:"flex-1 px-4 py-1 border rounded-md text-base sm:text-lg font-semibold hover:bg-gray-100 dark:hover:bg-gray-800",children:"Share Profile"})]}),e.jsx("div",{className:"mt-8",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 p-4",children:e.jsx("div",{className:"relative w-full h-[9.5rem] sm:h-60 md:h-72 lg:h-80 overflow-hidden rounded-lg",children:n?e.jsx("video",{src:"https://cdn.pixabay.com/video/2023/12/03/191860-891640938_large.mp4",autoPlay:!0,loop:!0,muted:!0,className:"absolute inset-0 w-full h-full object-cover"}):e.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-gray-100 dark:bg-gray-800 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-700 transition-all",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center text-gray-500 dark:text-gray-400 mb-2",children:e.jsx(w,{className:"h-12 w-12"})}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-lg font-medium",children:"Add Video"})]})})})})})]})}function C(l){console.log(l);const r=l.posts;return e.jsx(e.Fragment,{children:r?e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[e.jsx("div",{className:"flex justify-center border-t dark:border-gray-700",children:e.jsxs("div",{className:"flex space-x-12",children:[e.jsxs("button",{className:"flex items-center space-x-2 px-4 py-4 border-t-2 border-black dark:border-white -mt-px",children:[e.jsx(k,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"POSTS"})]}),e.jsxs("button",{className:"flex items-center space-x-2 px-4 py-4 text-gray-500 hover:text-gray-900",children:[e.jsx(P,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"SAVED"})]})]})}),e.jsx("div",{className:"grid grid-cols-3 gap-1 md:gap-8 mt-4",children:r&&r.length&&r.map(a=>{var d,i,n,c;return e.jsx("div",{className:"relative aspect-square group",children:["mp4","webm","mov"].includes((i=(d=a==null?void 0:a.file)==null?void 0:d.fileType)==null?void 0:i.toLowerCase())?e.jsx("video",{src:a.file.url,className:"w-full h-full object-cover",muted:!0}):["jpg","jpeg","png","gif","webp"].includes((c=(n=a==null?void 0:a.file)==null?void 0:n.fileType)==null?void 0:c.toLowerCase())?e.jsx("img",{src:a==null?void 0:a.file.url,alt:(a==null?void 0:a.caption)||"Post Image",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-200 text-gray-500",children:"Unsupported Format"})},a._id)})})]}):null})}const L=()=>{const[l,r]=m.useState(!1),[a,d]=m.useState(),i=h(),n=x(c=>c.auth.posts);return m.useEffect(()=>{n||(async()=>{var s,o;r(!0);try{const t=await f.get("/auth/post");console.log(t.data.posts),i(b(t.data.posts))}catch(t){d(((o=(s=t==null?void 0:t.response)==null?void 0:s.data)==null?void 0:o.message)||"Something went wrong"),r(!1)}finally{r(!1)}})()},[]),{loading:l,error:a}},A=()=>e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[e.jsx("div",{className:"flex justify-center border-t dark:border-gray-700",children:e.jsx("div",{className:"flex space-x-12",children:["POSTS","SAVED","LIKED"].map((l,r)=>e.jsxs("div",{className:"flex items-center space-x-2 px-4 py-4 animate-pulse",children:[e.jsx("div",{className:"w-4 h-4 bg-gray-300 dark:bg-gray-700 rounded-full"}),e.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-700 rounded-md w-16"})]},r))})}),e.jsx("div",{className:"grid grid-cols-3 gap-1 md:gap-8 mt-4",children:Array.from({length:9}).map((l,r)=>e.jsxs("div",{className:"relative aspect-square animate-pulse",children:[e.jsx("div",{className:"w-full h-full bg-gray-300 dark:bg-gray-700"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0"})]},r))})]});function U(){const{isLoggedIn:l}=p();if(!l)return window.location.href="/signup",null;const{loading:r,error:a}=L(),d=x(i=>i.auth.posts||[]);return console.log(d,"aa ja bro"),r?e.jsx(A,{}):a?e.jsxs("div",{children:["Error: ",a]}):e.jsxs("div",{className:"min-h-screen bg-white dark:bg-gray-900",children:[e.jsx(F,{value:d.length||0})," ",e.jsx(C,{posts:d})]})}export{U as default};
