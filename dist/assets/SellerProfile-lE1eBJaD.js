import{i as v,r as a,g as N,j as e,m as B,H as U,p,b as _,q as z,I as D,l as M,t as O}from"./index-Deeox68m.js";import{G as T,u as q,P as G,M as H,F as V}from"./useFollow-CrlLG4cc.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=v("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b=v("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);function Y(l){const[c,s]=a.useState([]);a.useEffect(()=>{l.posts&&Array.isArray(l.posts[0])?s(l.posts[0]):s(l.posts)},[l.posts]);const r=N();return e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[e.jsx("div",{className:"flex justify-center border-t dark:border-gray-700",children:e.jsxs("div",{className:"flex space-x-12",children:[e.jsxs("button",{className:"flex items-center space-x-2 px-4 py-4 border-t-2 border-black dark:border-white -mt-px",children:[e.jsx(T,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"POSTS"})]}),e.jsxs("button",{className:"flex items-center space-x-2 px-4 py-4 text-gray-500 hover:text-gray-900",children:[e.jsx(B,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"SAVED"})]})]})}),e.jsx("div",{className:"grid grid-cols-3 gap-1 md:gap-8 mt-4",children:c.map(t=>{var d,o,g,m;return e.jsxs("div",{onClick:()=>r(`/reels/${t._id}`),className:"relative aspect-square group cursor-pointer",children:[["mp4","webm","mov"].includes((o=(d=t==null?void 0:t.file)==null?void 0:d.fileType)==null?void 0:o.toLowerCase())?e.jsx("video",{src:t.file.url,className:"w-full h-full object-cover",muted:!0}):["jpg","jpeg","png","gif","webp"].includes((m=(g=t==null?void 0:t.file)==null?void 0:g.fileType)==null?void 0:m.toLowerCase())?e.jsx("img",{src:t==null?void 0:t.file.url,alt:(t==null?void 0:t.caption)||"Post Image",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-200 text-gray-500",children:"Unsupported Format"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center opacity-0 group-hover:opacity-100",children:e.jsxs("div",{className:"flex gap-3 sm:gap-6 md:gap-9 text-white",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(U,{className:"w-4 h-4 sm:w-6 sm:h-6 fill-current"}),e.jsx("span",{className:"font-semibold",children:t==null?void 0:t.likes})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4 sm:w-6 sm:h-6",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M20.656 17.008a9.993 9.993 0 10-3.59 3.615L22 22z"})}),e.jsx("span",{className:"font-semibold",children:(t==null?void 0:t.comments)||0})]})]})})]},t._id)})})]})}function J({setIsRateBottomSheetOpen:l,sellerId:c,setProfile:s}){const[r,t]=a.useState(0),[d,o]=a.useState(!1),g=n=>{t(n)},m=async()=>{try{o(!0);const n=await _.post(`/user/review?id=${c}`,{star:r});s(n.data.user),alert(`Thank you for rating us ${r} stars!`)}catch(n){console.log(n),alert("Something went wrong!")}finally{l(!1),o(!1)}};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-end z-50",children:e.jsxs("div",{className:"w-full bg-white rounded-t-lg p-4",children:[e.jsx("div",{className:"flex justify-center mb-2",children:e.jsx("div",{className:"w-12 h-1 bg-gray-400 rounded-full"})}),e.jsx("h2",{className:"text-center text-lg font-semibold text-gray-800 mb-4",children:"Rate us"}),e.jsx("div",{className:"flex justify-center items-center gap-2 mb-4",children:[1,2,3,4,5].map(n=>e.jsx(b,{onClick:()=>g(n),className:`w-8 h-8 cursor-pointer ${n<=r?"text-yellow-500":"text-gray-400"}`},n))}),r>0&&e.jsxs("p",{className:"text-center text-sm text-gray-500 mb-4",children:["You selected ",r," star",r>1?"s":"","!"]}),e.jsx("button",{onClick:m,disabled:r===0,className:`block w-full ${d&&"flex items-center justify-center"} px-4 py-2 mb-2 rounded-md font-semibold ${r>0?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:d?e.jsx(p,{className:"animate-spin"}):e.jsx("span",{children:"Submit"})}),e.jsx("button",{onClick:()=>l(!1),className:"block w-full text-center px-4 py-2 rounded-md text-gray-600 hover:bg-gray-100",children:"Cancel"})]})})})}function K(){const l=a.useRef(null),{id:c}=z(),[s,r]=a.useState(!0),[t,d]=a.useState(!1),[o,g]=a.useState(!0),[m,n]=a.useState(!1),[k,S]=a.useState(!0),[C,j]=a.useState(null),[y,u]=a.useState(!1),[F,w]=a.useState(!1),P=N(),{following:h,createFollower:R,removeFollower:L}=q(),f=async()=>{const x=await O.post(`https://admin.reeldekho.com/post/getprofile/${c}`);r(x.data.profile),d(x.data.sellerposts),console.log(x)},$=()=>{const i=h.find(x=>x.followedId._id===c);i&&j(i),S(!1)},E=async()=>{await f()};a.useEffect(()=>{const i=x=>{l.current&&!l.current.contains(x.target)&&u(!1)};return document.addEventListener("mousedown",i),()=>{document.removeEventListener("mousedown",i)}},[]),a.useEffect(()=>{E()},[c]),a.useEffect(()=>{h&&$()},[h]);const I=async()=>{n(!0),await R(c),await f(),n(!1)},A=async()=>{await L(c),u(!1),await f(),j(null)};return k?e.jsx(G,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsx("div",{className:"max-w-screen-lg mx-auto mt-2 sm:mt-5 md:mt-10 px-4",children:e.jsxs("div",{className:"flex flex-row items-center md:items-start gap-6",children:[e.jsxs("div",{className:"flex-shrink-0",children:[e.jsx("div",{className:"w-24 h-24 sm:w-32 sm:h-32 md:w-40 md:h-40 bg-blue-500 rounded-[25%] overflow-hidden",children:e.jsx("img",{src:s==null?void 0:s.profilePicture,alt:"Profile",className:"w-full h-full object-cover"})}),e.jsx("div",{className:"sm:hidden flex items-center justify-start gap-4 ",children:e.jsx("h1",{className:"text font-semibold text-gray-800 dark:text-gray-200",children:s==null?void 0:s.fullName})})]}),e.jsxs("div",{className:"flex-grow",children:[e.jsxs("div",{className:"sm:flex hidden items-center justify-start gap-4 ",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-semibold text-gray-800 dark:text-gray-200",children:s==null?void 0:s.fullName}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(D,{onClick:()=>P("/messages/"+s._id),className:"w-6 h-6 text-gray-500 cursor-pointer"}),e.jsx(M,{className:"w-6 h-6 text-green-500 cursor-pointer"}),e.jsx(H,{className:"w-6 h-6 text-blue-500 cursor-pointer"})]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("div",{className:"flex space-x-2 sm:space-x-4 md:space-x-8 mt-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"block font-semibold text-gray-800 dark:text-gray-200 text-center",children:t.length}),e.jsx("span",{className:"text-xs sm:text-sm text-gray-500 font-medium",children:"posts"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block font-semibold text-gray-800 dark:text-gray-200 text-center",children:s==null?void 0:s.followers}),e.jsx("span",{className:"text-xs sm:text-sm text-gray-500 font-medium",children:"followers"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block font-semibold text-gray-800 dark:text-gray-200 text-center",children:s==null?void 0:s.following}),e.jsx("span",{className:"text-xs sm:text-sm text-gray-500 font-medium",children:"following"})]})]})}),e.jsxs("div",{className:"sm:mt-4 mt-1 bg-gray-300 p-2 rounded-md",children:[e.jsx("h2",{className:"sm:text-lg text-xs capitalize font-semibold text-gray-800 dark:text-gray-200",children:s==null?void 0:s.occupation}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 sm:text-base text-xs",children:[e.jsx("span",{children:"Website @ "}),e.jsx("a",{href:`https://${s==null?void 0:s.website}`,className:"text-blue-500 hover:underline",children:s==null?void 0:s.website}),"| ",s==null?void 0:s.address]})]})]})]})}),e.jsxs("div",{className:"sm:mt-4 mt-2 flex gap-4 flex-grow",children:[C?e.jsxs("button",{ref:l,onClick:()=>u(!0),className:"flex-1 flex items-center justify-center gap-2 px-4 py-1 active:scale-95 border border-green-500 rounded-md text-base sm:text-lg font-semibold bg-green-100 text-green-700 dark:bg-green-800 dark:text-green-300",children:[e.jsx(W,{className:`w-5 h-5 ${y?"rotate-180":"rotate-0"} transition-transform`}),"Following"]}):e.jsx("button",{onClick:I,className:" flex-1 flex justify-center items-center px-4 py-1 border rounded-md text-base sm:text-lg font-semibold bg-gray-100 hover:bg-gray-300 dark:bg-gray-800 active:scale-95",children:m?e.jsx(p,{className:"animate-spin"}):"Follow"}),e.jsxs("button",{onClick:()=>w(!0),className:"flex-1 flex justify-center items-center gap-2 px-4 py-1 border rounded-md text-base sm:text-lg font-semibold bg-gray-100 hover:bg-gray-300 dark:bg-gray-800 active:scale-95",children:[e.jsx(b,{className:"text-[#FFAA00] w-5 h-5"})," ","Rate us"]})]}),e.jsx("div",{className:"w-full bg-white p-6 rounded-lg shadow-md mt-3",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-4xl font-bold text-gray-900",children:(s==null?void 0:s.totalReviews)==0?0:((s==null?void 0:s.totalStars)/(s==null?void 0:s.totalReviews)).toFixed(1)}),e.jsxs("div",{children:[e.jsx("div",{className:"flex gap-1 mb-1",children:[1,2,3,4,5].map(i=>e.jsx(b,{className:`w-5 h-5 ${(s==null?void 0:s.totalReviews)===0?"text-gray-300":i<=(s==null?void 0:s.totalStars)/(s==null?void 0:s.totalReviews)||i-(s==null?void 0:s.totalStars)/(s==null?void 0:s.totalReviews)<=.5?"text-yellow-500 fill-yellow-500":"text-gray-300"}`},i))}),e.jsxs("div",{className:"text-sm text-gray-500",children:[s==null?void 0:s.totalReviews," reviews"]})]})]})}),y&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-end z-50",children:e.jsxs("div",{ref:l,className:"w-full bg-white rounded-t-lg p-4",children:[e.jsx("div",{className:"flex justify-center mb-2",children:e.jsx("div",{className:"w-12 h-1 bg-gray-400 rounded-full"})}),e.jsx("h2",{className:"text-center text-lg font-semibold text-gray-800 mb-4",children:s==null?void 0:s.fullName}),e.jsx("button",{className:"block w-full text-left px-4 py-2 text-gray-800 font-semibold cursor-not-allowed",disabled:!0,children:"Following"}),e.jsx("button",{onClick:A,className:"block w-full text-left px-4 py-2 text-red-600 font-semibold hover:bg-gray-100",children:"Unfollow"}),e.jsx("button",{onClick:()=>u(!1),className:"block w-full text-left px-4 py-2 text-gray-600 hover:bg-gray-100",children:"Cancel"})]})}),F&&e.jsx(J,{setIsRateBottomSheetOpen:w,sellerId:c,setProfile:r}),e.jsx("div",{className:"mt-8",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 p-4",children:e.jsx("div",{className:"relative w-full h-[9.5rem] sm:h-60 md:h-72 lg:h-80 overflow-hidden rounded-lg",children:o?e.jsx("video",{src:"https://cdn.pixabay.com/video/2023/12/03/191860-891640938_large.mp4",autoPlay:!0,loop:!0,muted:!0,className:"absolute inset-0 w-full h-full object-cover"}):e.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-gray-100 dark:bg-gray-800 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-700 transition-all",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center text-gray-500 dark:text-gray-400 mb-2",children:e.jsx(V,{className:"h-12 w-12"})}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-lg font-medium",children:"Add Video"})]})})})})})]}),t?e.jsx(Y,{posts:t}):null]})}function Z(){return e.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900",children:e.jsx(K,{})})}export{Z as default};
