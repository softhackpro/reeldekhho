import{i as k,r as d,u as y,a as w,b as j,k as C,j as e,X as _,C as E,M as L,F as z,S as F,g as v,B as $,l as B,m as T,H as M,n as R,o as U}from"./index-Deeox68m.js";import{P as A,M as O,F as G,G as D,u as V}from"./useFollow-CrlLG4cc.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=k("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=k("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),I=()=>{const[l,r]=d.useState(!1),[n,h]=d.useState(null),m=y(i=>{var o;return(o=i==null?void 0:i.auth)==null?void 0:o.user}),c=w();return d.useEffect(()=>{m||(async()=>{var o,s;r(!0);try{const t=await j.get("/auth/profile");c(C(t.data.user))}catch(t){h(((s=(o=t==null?void 0:t.response)==null?void 0:o.data)==null?void 0:s.message)||"Something went wronge"),console.error("Error fetching profile:",t)}finally{r(!1)}})()},[]),{loading:l,error:n}};function W({isOpen:l,onClose:r,profileId:n}){console.log(n);const[h,m]=d.useState(!1),c=d.useRef(null);d.useEffect(()=>{const s=t=>{c.current&&!c.current.contains(t.target)&&r()};return l&&document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[l,r]);const i=async()=>{const s=`undefined/seller/${n}`;await navigator.clipboard.writeText(s),m(!0),setTimeout(()=>m(!1),2e3)},o=[{name:"Copy link",icon:e.jsx(E,{className:"w-5 h-5"}),onClick:i},{name:"Share to WhatsApp",icon:e.jsx(L,{className:"w-5 h-5"}),onClick:()=>{const s=encodeURIComponent(`undefined/seller/${n}`);window.open(`https://wa.me/?text=${s}`,"_blank")}},{name:"Share to Facebook",icon:e.jsx(z,{className:"w-5 h-5"}),onClick:()=>{const s=encodeURIComponent(`undefined/seller/${n}`);window.open(`https://www.facebook.com/sharer/sharer.php?u=${s}`,"_blank")}},{name:"Share to Telegram",icon:e.jsx(F,{className:"w-5 h-5"}),onClick:()=>{const s=encodeURIComponent(`undefined/seller/${n}`);window.open(`https://t.me/share/url?url=${s}`,"_blank")}}];return l?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{ref:c,className:"bg-white dark:bg-gray-800 rounded-xl w-full max-w-sm overflow-hidden",children:[e.jsxs("div",{className:"relative border-b dark:border-gray-700",children:[e.jsx("h3",{className:"text-center py-4 font-semibold dark:text-white",children:"Share to"}),e.jsx("button",{onClick:r,className:"absolute right-4 top-4 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200",children:e.jsx(_,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-4",children:o.map(s=>e.jsxs("button",{onClick:s.onClick,className:"w-full flex items-center space-x-3 p-3 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:s.icon}),e.jsx("span",{className:"text-sm font-medium dark:text-white",children:s.name})]},s.name))}),h&&e.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-black text-white px-4 py-2 rounded-full text-sm",children:"Link copied!"})]})}):null}function K(l){const r=l.value,n=l.following,h=l.followers,{loading:m,error:c}=I(),i=v(),[o,s]=d.useState(!0),[t,u]=d.useState(!1),a=y(g=>{var f;return(f=g==null?void 0:g.auth)==null?void 0:f.user}),x=()=>{u(!0)};if(m)return e.jsx(A,{});if(c)return e.jsx(e.Fragment,{children:e.jsx("div",{className:" w-full text-center text-red-500",children:"Sometching went wronge"})});const p=async g=>{i(g)};return e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsx("div",{className:"max-w-screen-lg mx-auto mt-2 sm:mt-5 md:mt-10 px-4",children:e.jsxs("div",{className:"flex flex-row items-center md:items-start gap-6",children:[e.jsxs("div",{className:"flex-shrink-0",children:[e.jsx("div",{className:"w-24 h-24 sm:w-32 sm:h-32 md:w-40 md:h-40 rounded-[25%] overflow-hidden",children:e.jsx("img",{src:a==null?void 0:a.profilePicture,alt:"Profile",className:"w-full h-full object-cover"})}),e.jsx("div",{className:"sm:hidden flex items-center justify-start gap-4 ",children:e.jsx("h1",{className:"text font-semibold text-gray-800 dark:text-gray-200",children:a==null?void 0:a.fullName})})]}),e.jsxs("div",{className:"flex-grow",children:[e.jsxs("div",{className:"sm:flex hidden items-center justify-start gap-4 ",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-semibold text-gray-800 dark:text-gray-200",children:a==null?void 0:a.fullName}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx($,{onClick:()=>p("/messages"),className:"w-6 h-6 text-gray-500 cursor-pointer"}),e.jsx(B,{className:"w-6 h-6 text-green-500 cursor-pointer"}),e.jsx(O,{className:"w-6 h-6 text-blue-500 cursor-pointer"})]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("div",{className:"flex space-x-2 sm:space-x-4 md:space-x-8 mt-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"block font-semibold text-gray-800 dark:text-gray-200 text-center",children:r}),e.jsx("span",{className:"text-xs sm:text-sm text-gray-500 font-medium",children:"posts"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block font-semibold text-gray-800 dark:text-gray-200 text-center",children:h||0}),e.jsx("span",{className:"text-xs sm:text-sm text-gray-500 font-medium",children:"followers"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block font-semibold text-gray-800 dark:text-gray-200 text-center",children:n||0}),e.jsx("span",{className:"text-xs sm:text-sm text-gray-500 font-medium",children:"following"})]})]})}),e.jsxs("div",{className:"sm:mt-4 mt-1 bg-gray-300 p-2 rounded-md",children:[e.jsx("h2",{className:"sm:text-lg text-xs capitalize font-semibold text-gray-800 dark:text-gray-200",children:a==null?void 0:a.occupation}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 sm:text-base text-xs",children:[e.jsx("span",{children:"Website @ "}),e.jsx("a",{href:"#",className:"text-blue-500 hover:underline",children:a==null?void 0:a.website})," ","| ",a==null?void 0:a.address]})]})]})]})}),e.jsxs("div",{className:"sm:mt-4 mt-2 flex gap-4 flex-grow",children:[e.jsx("button",{onClick:()=>i("/editProfile"),className:" flex-1 px-4 py-1 border rounded-md text-base sm:text-lg font-semibold hover:bg-gray-100 dark:hover:bg-gray-800",children:"Edit Profile"}),e.jsx("button",{onClick:x,className:"flex-1 px-4 py-1 border rounded-md text-base sm:text-lg font-semibold hover:bg-gray-100 dark:hover:bg-gray-800 active:scale-95",children:"Share Profile"})]}),e.jsx(W,{isOpen:t,onClose:()=>u(!1),profileId:a==null?void 0:a._id}),e.jsx("div",{className:"mt-8",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 p-4",children:e.jsx("div",{className:"relative w-full h-[9.5rem] sm:h-60 md:h-72 lg:h-80 overflow-hidden rounded-lg",children:o?e.jsx("video",{src:a==null?void 0:a.smallvideo,autoPlay:!0,loop:!0,muted:!0,className:"absolute inset-0 w-full h-full object-cover"}):e.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-gray-100 dark:bg-gray-800 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-700 transition-all",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center text-gray-500 dark:text-gray-400 mb-2",children:e.jsx(G,{className:"h-12 w-12"})}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-lg font-medium",children:"Add Video"})]})})})})})]})}function X(l){console.log(l);const r=v(),n=l.posts,h=w(),[m,c]=d.useState({}),i=()=>new Promise(s=>{const t=document.createElement("script");t.src="https://checkout.razorpay.com/v1/checkout.js",t.onload=()=>s(!0),t.onerror=()=>s(!1),document.body.appendChild(t)}),o=async(s,t)=>{var u;s.stopPropagation(),c(a=>({...a,[t]:!0}));try{if(!await i())throw new Error("Failed to load Razorpay script");const x=await j.post("/post/boostPost",{postId:t,amount:500*100});console.log(x);const p={key:"rzp_test_fOsTScdkbhACcC",amount:x==null?void 0:x.data.order.amount,currency:"INR",name:"Boost Post",description:`Boosting post with post-id: ${t}`,order_id:x==null?void 0:x.data.order.id,handler:async f=>{const N=await j.post("/post/boost-post/verify-payment",{razorpay_payment_id:f.razorpay_payment_id,razorpay_order_id:f.razorpay_order_id,razorpay_signature:f.razorpay_signature,postId:t}),P=n.findIndex(b=>(b==null?void 0:b._id)===N.data.post._id),S=N.data.post;h(R({index:P,post:S}))},prefill:{name:"User Name",email:"user@example.com",contact:"9999999999"},theme:{color:"#3B82F6"}};new window.Razorpay(p).open()}catch(a){a!=null&&a.response?(console.log((u=a==null?void 0:a.response)==null?void 0:u.data),alert("Payment verification failed. Please contact support.")):console.log(a)}finally{c(a=>({...a,[t]:!1}))}};return e.jsx(e.Fragment,{children:n?e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[e.jsx("div",{className:"flex justify-center border-t dark:border-gray-700",children:e.jsxs("div",{className:"flex space-x-12",children:[e.jsxs("button",{className:"flex items-center space-x-2 px-4 py-4 border-t-2 border-black dark:border-white -mt-px",children:[e.jsx(D,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"POSTS"})]}),e.jsxs("button",{className:"flex items-center space-x-2 px-4 py-4 text-gray-500 hover:text-gray-900",children:[e.jsx(T,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"SAVED"})]})]})}),e.jsx("div",{className:"grid grid-cols-3 gap-1 md:gap-8 mt-4",children:n&&n.length?n.map(s=>{var t,u,a,x;return e.jsxs("div",{onClick:()=>r(`/reels/${s._id}`),className:"relative aspect-square group",children:[["mp4","webm","mov"].includes((u=(t=s==null?void 0:s.file)==null?void 0:t.fileType)==null?void 0:u.toLowerCase())?e.jsx("video",{src:s.file.url,className:"w-full h-full object-cover",muted:!0}):["jpg","jpeg","png","gif","webp"].includes((x=(a=s==null?void 0:s.file)==null?void 0:a.fileType)==null?void 0:x.toLowerCase())?e.jsx("img",{src:s==null?void 0:s.file.url,alt:(s==null?void 0:s.caption)||"Post Image",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-200 text-gray-500",children:"Unsupported Format"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center opacity-0 group-hover:opacity-100",children:e.jsxs("div",{className:"flex gap-3 sm:gap-6 md:gap-9 text-white",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(M,{className:"w-4 h-4 sm:w-6 sm:h-6 fill-current"}),e.jsx("span",{className:"font-semibold",children:s==null?void 0:s.likes})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4 sm:w-6 sm:h-6",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M20.656 17.008a9.993 9.993 0 10-3.59 3.615L22 22z"})}),e.jsx("span",{className:"font-semibold",children:(s==null?void 0:s.comments)||0})]})]})}),e.jsx("button",{onClick:p=>o(p,s._id),disabled:s.isBoosted.status,className:`absolute top-2 right-2 p-2 rounded-full shadow-lg transform transition-all duration-300 ease-in-out
              ${s.isBoosted.status?"bg-gradient-to-r from-green-400 to-green-500 cursor-not-allowed scale-105":"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-purple-600 hover:to-blue-500 hover:scale-105"} text-white`,children:m[s==null?void 0:s._id]?e.jsx(q,{className:"animate-spin w-4 h-4"}):s.isBoosted.status?e.jsx("span",{className:"flex items-center space-x-1 px-1 transition-opacity duration-200",children:e.jsx("span",{className:" text-[0.5rem] sm:text-xs font-medium whitespace-nowrap",children:"Boosted"})}):e.jsx(H,{className:"sm:w-5 sm:h-5 w-[0.85rem] h-[0.85rem] animate-pulse"})})]},s._id)}):e.jsx("div",{className:"flex items-center justify-center h-full w-full text-gray-500",children:"No Posts Found"})})]}):e.jsx("div",{children:"no post found"})})}const J=()=>{const[l,r]=d.useState(!1),[n,h]=d.useState(),m=w(),c=y(i=>i.auth.posts);return d.useEffect(()=>{c||(async()=>{var o,s;r(!0);try{const t=await j.get("/auth/post");console.log(t.data.posts),m(U(t.data.posts))}catch(t){h(((s=(o=t==null?void 0:t.response)==null?void 0:o.data)==null?void 0:s.message)||"Something went wrong"),r(!1)}finally{r(!1)}})()},[]),{loading:l,error:n}},Q=()=>e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[e.jsx("div",{className:"flex justify-center border-t dark:border-gray-700",children:e.jsx("div",{className:"flex space-x-12",children:["POSTS","SAVED","LIKED"].map((l,r)=>e.jsxs("div",{className:"flex items-center space-x-2 px-4 py-4 animate-pulse",children:[e.jsx("div",{className:"w-4 h-4 bg-gray-300 dark:bg-gray-700 rounded-full"}),e.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-700 rounded-md w-16"})]},r))})}),e.jsx("div",{className:"grid grid-cols-3 gap-1 md:gap-8 mt-4",children:Array.from({length:9}).map((l,r)=>e.jsxs("div",{className:"relative aspect-square animate-pulse",children:[e.jsx("div",{className:"w-full h-full bg-gray-300 dark:bg-gray-700"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0"})]},r))})]});function ee(){const l=y(t=>{var u;return(u=t==null?void 0:t.auth)==null?void 0:u.user});console.log(l);const r=v();d.useEffect(()=>{l||r("/login")},[]);const{followError:n,followLoading:h,following:m,followers:c}=V(),{loading:i,error:o}=J(),s=y(t=>t.auth.posts||[]);return i||h?e.jsx(Q,{}):o?e.jsxs("div",{children:["Error: ",o]}):e.jsxs("div",{className:"min-h-screen bg-white dark:bg-gray-900",children:[e.jsx(K,{value:s.length||0,following:m.length,followers:c.length})," ",e.jsx(X,{posts:s})]})}export{ee as default};
