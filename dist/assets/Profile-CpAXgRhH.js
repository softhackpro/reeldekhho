import{r as x,u as g,a as p,b as j,f as v,j as e,X as N,C as k,M as S,F as P,S as C,d as b,B as E,g as $,h as F,i as L,e as _}from"./index-BDhOjovP.js";import{P as T,M as A,F as R,G as U,u as G}from"./useFollow-D_PebrMu.js";const O=()=>{const[o,r]=x.useState(!1),[c,a]=x.useState(null),m=g(i=>{var n;return(n=i==null?void 0:i.auth)==null?void 0:n.user}),d=p();return x.useEffect(()=>{m||(async()=>{var n,s;r(!0);try{const l=await j.get("/auth/profile");d(v(l.data.user))}catch(l){a(((s=(n=l==null?void 0:l.response)==null?void 0:n.data)==null?void 0:s.message)||"Something went wronge"),console.error("Error fetching profile:",l)}finally{r(!1)}})()},[]),{loading:o,error:c}};function D({isOpen:o,onClose:r,profileId:c}){console.log(c);const[a,m]=x.useState(!1),d=x.useRef(null);x.useEffect(()=>{const s=l=>{d.current&&!d.current.contains(l.target)&&r()};return o&&document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[o,r]);const i=async()=>{const s=`https://reeldekho.com/seller/${c}`;await navigator.clipboard.writeText(s),m(!0),setTimeout(()=>m(!1),2e3)},n=[{name:"Copy link",icon:e.jsx(k,{className:"w-5 h-5"}),onClick:i},{name:"Share to WhatsApp",icon:e.jsx(S,{className:"w-5 h-5"}),onClick:()=>{const s=encodeURIComponent(`https://reeldekho.com/seller/${c}`);window.open(`https://wa.me/?text=${s}`,"_blank")}},{name:"Share to Facebook",icon:e.jsx(P,{className:"w-5 h-5"}),onClick:()=>{const s=encodeURIComponent(`https://reeldekho.com/seller/${c}`);window.open(`https://www.facebook.com/sharer/sharer.php?u=${s}`,"_blank")}},{name:"Share to Telegram",icon:e.jsx(C,{className:"w-5 h-5"}),onClick:()=>{const s=encodeURIComponent(`https://reeldekho.com/seller/${c}`);window.open(`https://t.me/share/url?url=${s}`,"_blank")}}];return o?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{ref:d,className:"bg-white dark:bg-gray-800 rounded-xl w-full max-w-sm overflow-hidden",children:[e.jsxs("div",{className:"relative border-b dark:border-gray-700",children:[e.jsx("h3",{className:"text-center py-4 font-semibold dark:text-white",children:"Share to"}),e.jsx("button",{onClick:r,className:"absolute right-4 top-4 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200",children:e.jsx(N,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-4",children:n.map(s=>e.jsxs("button",{onClick:s.onClick,className:"w-full flex items-center space-x-3 p-3 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:s.icon}),e.jsx("span",{className:"text-sm font-medium dark:text-white",children:s.name})]},s.name))}),a&&e.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-black text-white px-4 py-2 rounded-full text-sm",children:"Link copied!"})]})}):null}function I(o){const r=o.value,c=o.following,a=o.followers,{loading:m,error:d}=O(),i=b(),[n,s]=x.useState(!0),[l,u]=x.useState(!1),t=g(h=>{var f;return(f=h==null?void 0:h.auth)==null?void 0:f.user}),y=()=>{u(!0)};if(m)return e.jsx(T,{});if(d)return e.jsx(e.Fragment,{children:e.jsx("div",{className:" w-full text-center text-red-500",children:"Sometching went wronge"})});const w=async h=>{i(h)};return e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsx("div",{className:"max-w-screen-lg mx-auto mt-2 sm:mt-5 md:mt-10 px-4",children:e.jsxs("div",{className:"flex flex-row items-center md:items-start gap-6",children:[e.jsxs("div",{className:"flex-shrink-0",children:[e.jsx("div",{className:"w-24 h-24 sm:w-32 sm:h-32 md:w-40 md:h-40 rounded-[25%] overflow-hidden",children:e.jsx("img",{src:t==null?void 0:t.profilePicture,alt:"Profile",className:"w-full h-full object-cover"})}),e.jsx("div",{className:"sm:hidden flex items-center justify-start gap-4 ",children:e.jsx("h1",{className:"text font-semibold text-gray-800 dark:text-gray-200",children:t==null?void 0:t.fullName})})]}),e.jsxs("div",{className:"flex-grow",children:[e.jsxs("div",{className:"sm:flex hidden items-center justify-start gap-4 ",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-semibold text-gray-800 dark:text-gray-200",children:t==null?void 0:t.fullName}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(E,{onClick:()=>w("/messages"),className:"w-6 h-6 text-gray-500 cursor-pointer"}),e.jsx($,{className:"w-6 h-6 text-green-500 cursor-pointer"}),e.jsx(A,{className:"w-6 h-6 text-blue-500 cursor-pointer"})]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("div",{className:"flex space-x-2 sm:space-x-4 md:space-x-8 mt-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"block font-semibold text-gray-800 dark:text-gray-200 text-center",children:r}),e.jsx("span",{className:"text-xs sm:text-sm text-gray-500 font-medium",children:"posts"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block font-semibold text-gray-800 dark:text-gray-200 text-center",children:a}),e.jsx("span",{className:"text-xs sm:text-sm text-gray-500 font-medium",children:"followers"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block font-semibold text-gray-800 dark:text-gray-200 text-center",children:c}),e.jsx("span",{className:"text-xs sm:text-sm text-gray-500 font-medium",children:"following"})]})]})}),e.jsxs("div",{className:"sm:mt-4 mt-1 bg-gray-300 p-2 rounded-md",children:[e.jsx("h2",{className:"sm:text-lg text-xs capitalize font-semibold text-gray-800 dark:text-gray-200",children:t==null?void 0:t.occupation}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 sm:text-base text-xs",children:[e.jsx("span",{children:"Website @ "}),e.jsx("a",{href:"#",className:"text-blue-500 hover:underline",children:t==null?void 0:t.website})," ","| ",t==null?void 0:t.address]})]})]})]})}),e.jsxs("div",{className:"sm:mt-4 mt-2 flex gap-4 flex-grow",children:[e.jsx("button",{onClick:()=>i("/editProfile"),className:" flex-1 px-4 py-1 border rounded-md text-base sm:text-lg font-semibold hover:bg-gray-100 dark:hover:bg-gray-800",children:"Edit Profile"}),e.jsx("button",{onClick:y,className:"flex-1 px-4 py-1 border rounded-md text-base sm:text-lg font-semibold hover:bg-gray-100 dark:hover:bg-gray-800 active:scale-95",children:"Share Profile"})]}),e.jsx(D,{isOpen:l,onClose:()=>u(!1),profileId:t==null?void 0:t._id}),e.jsx("div",{className:"mt-8",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 p-4",children:e.jsx("div",{className:"relative w-full h-[9.5rem] sm:h-60 md:h-72 lg:h-80 overflow-hidden rounded-lg",children:n?e.jsx("video",{src:"https://cdn.pixabay.com/video/2023/12/03/191860-891640938_large.mp4",autoPlay:!0,loop:!0,muted:!0,className:"absolute inset-0 w-full h-full object-cover"}):e.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-gray-100 dark:bg-gray-800 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-700 transition-all",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center text-gray-500 dark:text-gray-400 mb-2",children:e.jsx(R,{className:"h-12 w-12"})}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-lg font-medium",children:"Add Video"})]})})})})})]})}function M(o){console.log(o);const r=b(),c=o.posts;return e.jsx(e.Fragment,{children:c?e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[e.jsx("div",{className:"flex justify-center border-t dark:border-gray-700",children:e.jsxs("div",{className:"flex space-x-12",children:[e.jsxs("button",{className:"flex items-center space-x-2 px-4 py-4 border-t-2 border-black dark:border-white -mt-px",children:[e.jsx(U,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"POSTS"})]}),e.jsxs("button",{className:"flex items-center space-x-2 px-4 py-4 text-gray-500 hover:text-gray-900",children:[e.jsx(F,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"SAVED"})]})]})}),e.jsx("div",{className:"grid grid-cols-3 gap-1 md:gap-8 mt-4",children:c&&c.length&&c.map(a=>{var m,d,i,n;return e.jsx("div",{onClick:()=>r(`/reels/${a._id}`),className:"relative aspect-square group",children:["mp4","webm","mov"].includes((d=(m=a==null?void 0:a.file)==null?void 0:m.fileType)==null?void 0:d.toLowerCase())?e.jsx("video",{src:a.file.url,className:"w-full h-full object-cover",muted:!0}):["jpg","jpeg","png","gif","webp"].includes((n=(i=a==null?void 0:a.file)==null?void 0:i.fileType)==null?void 0:n.toLowerCase())?e.jsx("img",{src:a==null?void 0:a.file.url,alt:(a==null?void 0:a.caption)||"Post Image",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-200 text-gray-500",children:"Unsupported Format"})},a._id)})})]}):null})}const V=()=>{const[o,r]=x.useState(!1),[c,a]=x.useState(),m=p(),d=g(i=>i.auth.posts);return x.useEffect(()=>{d||(async()=>{var n,s;r(!0);try{const l=await j.get("/auth/post");console.log(l.data.posts),m(L(l.data.posts))}catch(l){a(((s=(n=l==null?void 0:l.response)==null?void 0:n.data)==null?void 0:s.message)||"Something went wrong"),r(!1)}finally{r(!1)}})()},[]),{loading:o,error:c}},B=()=>e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[e.jsx("div",{className:"flex justify-center border-t dark:border-gray-700",children:e.jsx("div",{className:"flex space-x-12",children:["POSTS","SAVED","LIKED"].map((o,r)=>e.jsxs("div",{className:"flex items-center space-x-2 px-4 py-4 animate-pulse",children:[e.jsx("div",{className:"w-4 h-4 bg-gray-300 dark:bg-gray-700 rounded-full"}),e.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-700 rounded-md w-16"})]},r))})}),e.jsx("div",{className:"grid grid-cols-3 gap-1 md:gap-8 mt-4",children:Array.from({length:9}).map((o,r)=>e.jsxs("div",{className:"relative aspect-square animate-pulse",children:[e.jsx("div",{className:"w-full h-full bg-gray-300 dark:bg-gray-700"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0"})]},r))})]});function z(){const{isLoggedIn:o}=_();if(!o)return window.location.href="/signup",null;g(s=>{var l;return(l=s==null?void 0:s.auth)==null?void 0:l.user});const{followError:r,followLoading:c,following:a,followers:m}=G(),{loading:d,error:i}=V(),n=g(s=>s.auth.posts||[]);return console.log(n,"aa ja bro"),console.log(a,"mat aa bro"),d||c?e.jsx(B,{}):i||r?e.jsxs("div",{children:["Error: ",i]}):e.jsxs("div",{className:"min-h-screen bg-white dark:bg-gray-900",children:[e.jsx(I,{value:n.length||0,following:a.length,followers:m.length})," ",e.jsx(M,{posts:n})]})}export{z as default};
