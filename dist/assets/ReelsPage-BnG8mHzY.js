import{r,b as i,c as u,j as s,R as m}from"./index-BDhOjovP.js";let f=1;const x=()=>{const[o,l]=r.useState([]),n=async()=>{var t,a;try{const e=await i.get("/post/get");l(e.data.posts),console.log(e.data.posts)}catch(e){console.error((a=(t=e==null?void 0:e.response)==null?void 0:t.data)==null?void 0:a.error)}},c=async()=>{var t,a;try{const e=await i.get("/post/get?page="+f);l([...o,...e.data.posts]),e.data.posts.length>0&&f++,console.log(e.data.posts)}catch(e){console.error((a=(t=e==null?void 0:e.response)==null?void 0:t.data)==null?void 0:a.error)}};return r.useEffect(()=>{n()},[]),{reels:o,loadReels:c}};function v(){const[o,l]=r.useState(!0),{loadReels:n,reels:c}=x(),t=r.useRef(null),a=r.useRef([]),e=u(()=>n(),()=>{},{threshold:1});return s.jsx("div",{className:"h-[100dvh] w-full max-w-md m-auto bg-black overflow-hidden",children:s.jsxs("div",{ref:t,className:"h-full scrollbar-hide overflow-y-scroll snap-mandatory snap-y",children:[c.map((h,d)=>s.jsx("div",{ref:p=>a.current[d]=p,className:"snap-start h-full",children:s.jsx(m,{reel:h})},d)),s.jsx("div",{ref:e,className:"relative flex justify-center items-center dark:text-white text-black z-10 h-8 w-full snap-start bg-black overflow-hidden",children:o?s.jsx("p",{children:"Loading more reels..."}):s.jsx("p",{children:"No more reels!"})})]})})}function g(){return s.jsx("div",{className:"h-[100dvh] w-full relative m-auto ",children:s.jsx(v,{})})}export{g as default};
