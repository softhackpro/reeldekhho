import{r as a,b as x,f as v,j as e,R as j}from"./index-Deeox68m.js";let R=1;const w=()=>{const[n,i]=a.useState([]),[c,l]=a.useState([]),[u,f]=a.useState(!0),[h,p]=a.useState(!0),m=async()=>{var r,o;try{const t=(await x.get("/post/get")).data.posts;i(t),l(t.map(g=>g._id)),console.log(t)}catch(s){console.error((o=(r=s==null?void 0:s.response)==null?void 0:r.data)==null?void 0:o.error)}finally{p(!1)}},d=async()=>{var r,o;if(u){console.log("I am run ung ");try{const t=(await x.get(`/post/get?page=${R}&excludeIds=${c.join(",")}`)).data.posts;t.length<=0&&f(!1),i([...n,...t]),l([...c,...t.map(g=>g._id)]),t.length>0&&R++,console.log(t)}catch(s){console.error((o=(r=s==null?void 0:s.response)==null?void 0:r.data)==null?void 0:o.error)}}};return a.useEffect(()=>{m()},[]),{reels:n,loadReels:d,loader:h}};function b(){const[n,i]=a.useState(!0),{loadReels:c,reels:l,loader:u}=w(),f=a.useRef(null),h=a.useRef([]),p=v(()=>c(),()=>{},{threshold:.3});return e.jsx("div",{className:"h-[100dvh] w-full max-w-md m-auto bg-black overflow-hidden",children:u?e.jsx("div",{children:"Loading..."}):e.jsxs("div",{ref:f,className:"h-[100dvh] scrollbar-hide overflow-y-scroll snap-start snap-mandatory snap-y",children:[l&&l.length&&l.map((m,d)=>e.jsx("div",{ref:r=>h.current[d]=r,className:"snap-start w-full h-full",children:e.jsx(j,{reel:m})},d)),e.jsx("div",{ref:p,className:"relative flex dark:bg-black bg-white text-black dark:text-white justify-center items-center z-10 h-full w-full snap-start overflow-hidden",children:n?e.jsx("p",{children:"Loading more reels..."}):e.jsx("p",{children:"No more reels!"})})]})})}function N(){return e.jsx("div",{className:"h-[100dvh] w-full relative m-auto ",children:e.jsx(b,{})})}export{N as default};
