const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Post-9GyrymEY.js","assets/index-BDhOjovP.js","assets/index-CJ-Ty4Mn.css"])))=>i.map(i=>d[i]);
import{j as e,U as j,r as n,u,a as v,b as h,s as g,c as y,_ as N}from"./index-BDhOjovP.js";import{H as b}from"./HeaderStatic-ls0ZY1Fs.js";function w(){return e.jsx("div",{className:"p-4 sticky top-4",children:e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(j,{className:"w-8 h-8 dark:text-white"}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold dark:text-white",children:"Welcome to Reeldekho"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Discover people to follow"})]})]})})})}const _=()=>{const[d,i]=n.useState(!0),[x,o]=n.useState(null),t=u(s=>{var a;return(a=s==null?void 0:s.post)==null?void 0:a.posts}),r=v(),p=u(s=>{var a;return(a=s==null?void 0:s.post)==null?void 0:a.page});return n.useEffect(()=>{const s=async()=>{var a,l;i(!0);try{const c=t.map(f=>f._id).join(","),m=await h.get(`/post/get?page=${p}&excludeIds=${c}`);r(g({type:"ADD_POST",payload:m.data.posts}))}catch(c){o(((l=(a=c.response)==null?void 0:a.data)==null?void 0:l.message)||"An error occurred")}finally{i(!1)}};t!=null&&t.length?i(!1):s()},[t==null?void 0:t.length,r,p]),{loading:d,error:x,posts:t,loadMorePosts:async()=>{var s,a;try{const l=t.map(m=>m._id).join(","),c=await h.get(`/post/get?page=${p}&excludeIds=${l}`);c.data.posts.length>0&&r(g({type:"ADD_POST",payload:c.data.posts}))}catch(l){o(((a=(s=l.response)==null?void 0:s.data)==null?void 0:a.message)||"An error occurred")}}}},k=n.lazy(()=>N(()=>import("./Post-9GyrymEY.js"),__vite__mapDeps([0,1,2])));function E(){const{loading:d,error:i,loadMorePosts:x}=_(),o=u(r=>r.post.posts),t=y(x,()=>{},{threshold:.3});return d?e.jsx("div",{className:"w-full h-full flex justify-center items-center text-black",children:"Loading posts..."}):e.jsxs(e.Fragment,{children:[e.jsx(b,{}),e.jsxs("div",{className:"max-w-5xl mx-auto grid grid-cols-1 lg:grid-cols-3 margintopo",children:[e.jsxs("div",{className:" lg:col-span-2 mx-auto md:mt-0 max-w-2xl",children:[e.jsx(n.Suspense,{fallback:e.jsx("div",{className:"w-full h-full flex justify-center items-center text-black",children:"Loading post..."}),children:e.jsx("div",{className:"",children:(o==null?void 0:o.length)>0?o.map(r=>e.jsx(k,{post:r},r._id)):e.jsx("div",{className:"text-center text-gray-500",children:"No posts available"})})}),e.jsx("div",{ref:t,className:"w-full text-center dark:text-white text-black h-10 bg-transparent",children:"Loading ..."})]}),e.jsx("div",{className:"hidden lg:block",children:e.jsx(w,{})})]})]})}export{E as default};
